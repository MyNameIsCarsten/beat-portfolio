{% load static %}

<!DOCTYPE html>
<html >
<head>
  <meta charset="UTF-8">
  <title>Beat Catalog</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/5.0.0/normalize.min.css">
  <link rel="stylesheet" href="{% static 'catalog_app/styles.css' %}">
</head>

<body>
  <header>
    <div>
      <h1>Beat Catalog</h1>
      <form action="" method="post">
        {% csrf_token %}
        <label>Path:</label>
        <input type="text" name="path" value=""><br><br>
        <input type="submit" value="Submit">
      </form>
      <form action="" method="post">
        {% csrf_token %}
        <label>Delete Database:</label>
        <input type="hidden" name="delete_all" value=""><br><br>
        <input type="submit" value="Delete">
      </form>

      <form action="" method="post">
        {% csrf_token %}
        <label>Selected BPM for filtering: <output id="bpm_value"></output></label><br><br>
        <span>{{ mid_bpm }}</span>
        <input id="bpm_select" type="range" name="filter_bpm" value="{{ mid_bpm }}" min="{{ min_bpm }}" max="{{ max_bpm }}">
        <span>{{ max_bpm }}</span>
        <input type="submit" value="Filter BPM">
      </form>



      <div class="container">
          <form action="" method="post" class="item" >
            {% csrf_token %}
            	<label>Which key do you want to filter?</label>
                <select name="key">
                    {% for key in keys %}
                    <option value="{{ key.key }}">{{ key.key }}</option>
                    {% endfor %}
                </select>
                <input type="submit" value="Submit">
          </form>
      </div>
    </div>

  </header>
  <div class="wrapper">



  <div class="div-table" id="wrapper">
    <table>
      <thead>
        <tr class="row header green">
          <th class="cell">Number</th>
          <th class="cell">Name</th>
          <th class="cell">BPM</th>
          <th class="cell">Key</th>
          <th class="cell">Path</th>
          <th class="cell"></th>
        </tr>
      </thead>
      <tbody>
      {% for beat in all_items %}
        <tr class="row">
          <td class="cell"><a href="{{ row.url }}">{{ beat.number }}</a></td>
          <td class="cell">{{ beat.name }}</td>
          <td class="cell">{{ beat.bpm }}</td>
          <td class="cell">{{ beat.key }}</td>
          <td class="cell">{{ beat.full_path}}</td>
          <td class="cell">
            <form action="" method="post">
            {% csrf_token %}
              <button name="row_id" value={{ row.id }}>delete</button>
            </form>
          </td>
        </tr>
      {% endfor %}
      </tbody>
    </table>
  </div>

</div>
  <script src='http://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js'></script>

<script>
const value = document.querySelector("#bpm_value");
const input = document.querySelector("#bpm_select");
value.textContent = input.value;
input.addEventListener("input", (event) => {
  value.textContent = event.target.value;
});
</script>
</body>
</html>